// Theme name: Template
// Theme author: Michael Martin-Smucker

//-------- Variables --------//

@bg: #666; // background color of the navbar
@height: 36px; // height of the navbar
@rad: 8px; // a border-radius value for all four corners
@text: #fff; // text color of the menu items

//-------- Mixins --------//

// Set border-radius if @rad is set to something other than 0
.radius (@r) when not (@r = 0) {
    border-radius: @r;
}
.first-rad (@r) when not (@r = 0) {
    border-radius: @r 0 0 @r;
}
.last-rad (@r) when not (@r = 0) {
    border-radius: 0 @r @r 0;
}

// If @rad is set, adjust the width and position of wide menus
.menu-width (@r) when (@r >= (@height / 2)) {
    left: (@height / 2);
    width: (950px - @height);
}
.menu-width (@r) when (@r < (@height / 2)) and not (@r = 0) {
    left: @r;
    width: (950px - (@r * 2));
}

// If @height is not set to the default (36px), adjust height and line-height where needed
.height (@h) when not (@h = 36px) {
    height: @h;
}
.lineheight (@h) when not (@h = 36px) {
    line-height: (@h - 20px);
}

//-------- Styles --------//

ul.dept-navbar {
    // replace "template" with the name of your theme
    &.template {
        background: @bg;
        background-image: url('../images/bg-nav.png'); // a fallback for browsers that don't support gradients
        background-image: linear-gradient(transparent 10%, rgba(0,0,0,0.3)); // a gradient overlay
        .radius(@rad); // add border-radius if the variable has been set
        box-shadow: 0 0 8px rgba(0,0,0,0.3); // a subtle shadow behind the navbar
        .height(@height); // conditionally add a height property


        .flexbox-legacy &.full-width > li:last-child > a {
            .last-rad(@rad); // border radius for last child
        }

        > li {
            .height(@height); // conditionally add a height property

            > a {
                border-left-color: lighten(@bg, 6.6%);
                border-right-color: darken(@bg, 20%);
                color: @text;
                .lineheight(@height); // automatically adjusts line-height based on navbar height
                text-shadow: -1px -1px 1px rgba(0,0,0,0.4);
            }
            &:first-child > a {
                .first-rad(@rad); // border radius for first child
            }
            &:last-child, &.last-child {
                > a:after {
                    border-left-color: lighten(@bg, 6.6%);
                    .height(@height); // match the navbar height
                }
            }
            &:hover > a, > a:hover {
                background-color: darken(@bg, 13.2%);
                background-image: url('../images/bg-selected.png'); // a fallback for the hovered background gradient
                background-image: radial-gradient(center 120px, ellipse cover, rgba(255,255,255,0.1) 40%, rgba(255,255,255,0.08) 50%, transparent 80%);
                box-shadow: inset 0 2px 6px rgba(0,0,0,0.3);
            }
            > div.menu {
                border-color: darken(@bg, 10%);

                &.wide {
                    .menu-width(@rad); // adjust menu position with respect to border-radius
                }

                ul {
                    li {
                        a {
                            color: #666;
                            &:hover {
                                color: #333;
                            }
                        }
                    }
                }
            }
        }
    }
}